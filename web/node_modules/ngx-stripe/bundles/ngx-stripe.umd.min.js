!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("rxjs/operators"),require("rxjs"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-stripe",["exports","@angular/common","rxjs/operators","rxjs","@angular/core"],e):e(t["ngx-stripe"]={},t.ng.common,t.rxjs.operators,t.rxjs,t.ng.core)}(this,function(t,r,s,o,i){"use strict";var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t,o,p,u){return new(p||(p=Promise))(function(e,n){function r(t){try{s(u.next(t))}catch(e){n(e)}}function i(t){try{s(u["throw"](t))}catch(e){n(e)}}function s(t){t.done?e(t.value):function n(e){return e instanceof p?e:new p(function(t){t(e)})}(t.value).then(r,i)}s((u=u.apply(t,o||[])).next())})}function a(r,i){var s,o,p,t,u={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function n(t){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,o&&(p=2&t[0]?o["return"]:t[0]?o["throw"]||((p=o["return"])&&p.call(o),0):o.next)&&!(p=p.call(o,t[1])).done)return p;switch(o=0,p&&(t=[2&t[0],p.value]),t[0]){case 0:case 1:p=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(p=0<(p=u.trys).length&&p[p.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!p||t[1]>p[0]&&t[1]<p[3])){u.label=t[1];break}if(6===t[0]&&u.label<p[1]){u.label=p[1],p=t;break}if(p&&u.label<p[2]){u.label=p[2],u.ops.push(t);break}p[2]&&u.ops.pop(),u.trys.pop();continue}t=i.call(r,u)}catch(e){t=[6,e],o=0}finally{s=p=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(r=s.next()).done;)o.push(r.value)}catch(p){i={error:p}}finally{try{r&&!r.done&&(n=s["return"])&&n.call(s)}finally{if(i)throw i.error}}return o}function e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}var c=new i.InjectionToken("Stripe Publishable Key"),m=new i.InjectionToken("Stripe Options"),h=function(){function t(t){this.platformId=t}return t.prototype.getNativeWindow=function(){return r.isPlatformBrowser(this.platformId)?window:{}},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:i.Inject,args:[i.PLATFORM_ID]}]}]},t}(),l=function(){function t(t){this.platformId=t}return t.prototype.getNativeDocument=function(){return r.isPlatformBrowser(this.platformId)?document:{}},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:i.Inject,args:[i.PLATFORM_ID]}]}]},t}(),f=function(){function t(t,e,n){this.platformId=t,this.window=e,this.document=n,this.status=new o.BehaviorSubject({error:!1,loaded:!1,loading:!1})}return t.prototype.asStream=function(){return this.load(),this.status.asObservable()},t.prototype.isReady=function(){return this.status.getValue().loaded},t.prototype.load=function(){var t=this;if(!r.isPlatformServer(this.platformId)){var e=this.status.getValue();if(this.window.getNativeWindow().hasOwnProperty("Stripe"))this.status.next({error:!1,loaded:!0,loading:!1});else if(!e.loaded&&!e.loading){this.status.next(u({},e,{loading:!0}));var n=this.document.getNativeDocument().createElement("script");n.type="text/javascript",n.async=!0,n.defer=!0,n.src="https://js.stripe.com/v3/",n.onload=function(){t.status.next({error:!1,loaded:!0,loading:!1})},n.onerror=function(){t.status.next({error:!0,loaded:!1,loading:!1})},this.document.getNativeDocument().body.appendChild(n)}}},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:i.Inject,args:[i.PLATFORM_ID]}]},{type:h},{type:l}]},t}(),y=function(){function t(t,e,n,r){var i=this;this.loader=t,this.window=e,this.key=n,this.options=r,this.stripe$=new o.BehaviorSubject(undefined),this.stripe=this.stripe$.asObservable().pipe(s.filter(function(t){return Boolean(t)})),this.loader.asStream().pipe(s.filter(function(t){return!0===t.loaded}),s.first(),s.map(function(){return i.window.getNativeWindow().Stripe})).subscribe(function(t){var e=i.options?t(i.key,i.options):t(i.key);i.stripe$.next(e)})}return t.prototype.getInstance=function(){return this.stripe$.getValue()},t.prototype.elements=function(e){return this.stripe$.asObservable().pipe(s.filter(function(t){return Boolean(t)}),s.map(function(t){return t.elements(e)}),s.first())},t.prototype.redirectToCheckout=function(e){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.redirectToCheckout(e))}),s.first())},t.prototype.confirmAuBecsDebitPayment=function(e,n){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmAuBecsDebitPayment(e,n))}),s.first())},t.prototype.confirmBancontactPayment=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmBancontactPayment(e,n,r))}),s.first())},t.prototype.confirmCardPayment=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmCardPayment(e,n,r))}),s.first())},t.prototype.confirmEpsPayment=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmEpsPayment(e,n,r))}),s.first())},t.prototype.confirmFpxPayment=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmFpxPayment(e,n,r))}),s.first())},t.prototype.confirmGiropayPayment=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmGiropayPayment(e,n,r))}),s.first())},t.prototype.confirmIdealPayment=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmIdealPayment(e,n,r))}),s.first())},t.prototype.confirmP24Payment=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmP24Payment(e,n,r))}),s.first())},t.prototype.confirmSepaDebitPayment=function(e,n){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmSepaDebitPayment(e,n))}),s.first())},t.prototype.handleCardAction=function(e){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.handleCardAction(e))}),s.first())},t.prototype.createPaymentMethod=function(e){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.createPaymentMethod(e))}),s.first())},t.prototype.retrievePaymentIntent=function(e){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.retrievePaymentIntent(e))}),s.first())},t.prototype.confirmAuBecsDebitSetup=function(e,n){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmAuBecsDebitSetup(e,n))}),s.first())},t.prototype.confirmCardSetup=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmCardSetup(e,n,r))}),s.first())},t.prototype.confirmSepaDebitSetup=function(e,n){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmSepaDebitSetup(e,n))}),s.first())},t.prototype.retrieveSetupIntent=function(e){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmSepaDebitSetup(e))}),s.first())},t.prototype.paymentRequest=function(t){var e=this.getInstance();return e?e.paymentRequest(t):undefined},t.prototype.createToken=function(e,n){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.createToken(e,n))}),s.first())},t.prototype.createSource=function(e,n){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.createSource(e,n))}),s.first())},t.prototype.retrieveSource=function(e){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.retrieveSource(e))}),s.first())},t.prototype.handleCardPayment=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.handleCardPayment(e,n,r))}),s.first())},t.prototype.confirmPaymentIntent=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmPaymentIntent(e,n,r))}),s.first())},t.prototype.handleCardSetup=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.handleCardSetup(e,n,r))}),s.first())},t.prototype.confirmSetupIntent=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.confirmSetupIntent(e,n,r))}),s.first())},t.prototype.handleFpxPayment=function(e,n,r){return this.stripe.pipe(s.switchMap(function(t){return o.from(t.handleFpxPayment(e,n,r))}),s.first())},t}(),d=function(){function t(t,e,n,r){this.key=t,this.options=e,this.loader=n,this.window=r,t&&(this.stripe=new y(this.loader,this.window,t,e))}return t.prototype.getStripeReference=function(){var t=this;return this.loader.asStream().pipe(s.filter(function(t){return!0===t.loaded}),s.map(function(){return t.window.getNativeWindow().Stripe}))},t.prototype.getInstance=function(){return this.stripe.getInstance()},t.prototype.setKey=function(t,e){return this.changeKey(t,e)},t.prototype.changeKey=function(t,e){return this.stripe=new y(this.loader,this.window,t,e),this.stripe},t.prototype.elements=function(t){return this.stripe.elements(t)},t.prototype.redirectToCheckout=function(t){return this.stripe.redirectToCheckout(t)},t.prototype.confirmAuBecsDebitPayment=function(t,e){return this.stripe.confirmAuBecsDebitPayment(t,e)},t.prototype.confirmBancontactPayment=function(t,e,n){return this.stripe.confirmBancontactPayment(t,e,n)},t.prototype.confirmCardPayment=function(t,e,n){return this.stripe.confirmCardPayment(t,e,n)},t.prototype.confirmEpsPayment=function(t,e,n){return this.stripe.confirmEpsPayment(t,e,n)},t.prototype.confirmFpxPayment=function(t,e,n){return this.stripe.confirmFpxPayment(t,e,n)},t.prototype.confirmGiropayPayment=function(t,e,n){return this.stripe.confirmGiropayPayment(t,e,n)},t.prototype.confirmIdealPayment=function(t,e,n){return this.stripe.confirmIdealPayment(t,e,n)},t.prototype.confirmP24Payment=function(t,e,n){return this.stripe.confirmP24Payment(t,e,n)},t.prototype.confirmSepaDebitPayment=function(t,e){return this.stripe.confirmSepaDebitPayment(t,e)},t.prototype.handleCardAction=function(t){return this.stripe.handleCardAction(t)},t.prototype.createPaymentMethod=function(t){return this.stripe.createPaymentMethod(t)},t.prototype.retrievePaymentIntent=function(t){return this.stripe.retrievePaymentIntent(t)},t.prototype.confirmAuBecsDebitSetup=function(t,e){return this.stripe.confirmAuBecsDebitSetup(t,e)},t.prototype.confirmCardSetup=function(t,e,n){return this.stripe.confirmCardSetup(t,e,n)},t.prototype.confirmSepaDebitSetup=function(t,e){return this.stripe.confirmSepaDebitSetup(t,e)},t.prototype.retrieveSetupIntent=function(t){return this.stripe.retrieveSetupIntent(t)},t.prototype.paymentRequest=function(t){return this.stripe.paymentRequest(t)},t.prototype.createToken=function(t,e){return this.stripe.createToken(t,e)},t.prototype.createSource=function(t,e){return this.stripe.createSource(t,e)},t.prototype.retrieveSource=function(t){return this.stripe.retrieveSource(t)},t.prototype.handleCardPayment=function(t,e,n){return this.stripe.handleCardPayment(t,e,n)},t.prototype.confirmPaymentIntent=function(t,e,n){return this.stripe.confirmPaymentIntent(t,e,n)},t.prototype.handleCardSetup=function(t,e,n){return this.stripe.handleCardSetup(t,e,n)},t.prototype.confirmSetupIntent=function(t,e,n){return this.stripe.confirmSetupIntent(t,e,n)},t.prototype.handleFpxPayment=function(t,e,n){return this.stripe.handleFpxPayment(t,e,n)},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:String,decorators:[{type:i.Inject,args:[c]}]},{type:undefined,decorators:[{type:i.Inject,args:[m]}]},{type:f},{type:h}]},t}(),v=function(){function t(t){this.stripeService=t}return t.prototype.elements=function(t,e){return void 0===e&&(e={}),t?0<Object.keys(e).length?t.elements(e):t.elements():0<Object.keys(e).length?this.stripeService.elements(e):this.stripeService.elements()},t.prototype.paymentRequest=function(t,e){return t?t.paymentRequest(e):this.stripeService.paymentRequest(e)},t.prototype.mergeOptions=function(t,e){return!e||t&&t.classes?t||{}:t&&t.classes?t||{}:u({},t||{},{classes:{base:e,complete:e+"--complete",empty:e+"--empty",focus:e+"--focus",invalid:e+"--invalid",webkitAutoFill:e+"--webkit-autoFill"}})},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:d}]},t}(),E=function(){function t(t){this.stripeElementsService=t,this.load=new i.EventEmitter,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ready=new i.EventEmitter,this.escape=new i.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(i){return n(this,void 0,void 0,function(){var e,n,r;return a(this,function(t){switch(t.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,i.elementsOptions||i.stripe||!this.elements?[4,(r=this).stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]:[3,2];case 1:r.elements=t.sent(),n=!0,t.label=2;case 2:return(i.options||i.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}})})},t.prototype.ngOnInit=function(){return n(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",[4,(e=this).stripeElementsService.elements(this.stripe).toPromise()]);case 1:e.elements=t.sent(),this.createElement(),this.state="ready",t.label=2;case 2:return[2]}})})},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getCard=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={}),this.element=this.elements.create("card",t),this.element.on("change",function(t){return e.change.emit(t)}),this.element.on("blur",function(){return e.blur.emit()}),this.element.on("focus",function(){return e.focus.emit()}),this.element.on("ready",function(){return e.ready.emit()}),this.element.on("escape",function(){return e.escape.emit()}),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t.decorators=[{type:i.Component,args:[{selector:"ngx-stripe-card",template:'<div class="field" #stripeElementRef></div>'}]}],t.ctorParameters=function(){return[{type:v}]},t.propDecorators={stripeElementRef:[{type:i.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:i.Input}],options:[{type:i.Input}],elementsOptions:[{type:i.Input}],stripe:[{type:i.Input}],load:[{type:i.Output}],blur:[{type:i.Output}],change:[{type:i.Output}],focus:[{type:i.Output}],ready:[{type:i.Output}],escape:[{type:i.Output}]},t}(),g=function(){function t(t){this.stripeElementsService=t,this.elements=new i.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(i){return n(this,void 0,void 0,function(){var e,n,r;return a(this,function(t){switch(t.label){case 0:return this.state="starting",e=this.elementsOptions,n=this.stripe,i.elementsOptions||i.stripe||!this._elements?[4,(r=this).stripeElementsService.elements(n,e).toPromise()]:[3,2];case 1:r._elements=t.sent(),this.elements.emit(this._elements),t.label=2;case 2:return this.state="ready",[2]}})})},t.prototype.ngOnInit=function(){return n(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",[4,(e=this).stripeElementsService.elements(this.stripe).toPromise()]);case 1:e._elements=t.sent(),this.elements.emit(this._elements),this.state="ready",t.label=2;case 2:return[2]}})})},t.decorators=[{type:i.Directive,args:[{selector:"ngx-stripe-card-group,[ngxStripeCardGroup]"}]}],t.ctorParameters=function(){return[{type:v}]},t.propDecorators={elementsOptions:[{type:i.Input}],stripe:[{type:i.Input}],elements:[{type:i.Output}]},t}(),b=function(){function t(t,e){this.stripeElementsService=t,this.cardGroup=e,this.load=new i.EventEmitter,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ready=new i.EventEmitter,this.escape=new i.EventEmitter}return t.prototype.ngOnChanges=function(e){return n(this,void 0,void 0,function(){return a(this,function(t){return(e.options||e.containerClass)&&this.setupElement("options"),[2]})})},t.prototype.ngOnInit=function(){var e=this;if(!this.cardGroup)throw new Error("StripeCardNumberComponent must have StripeCardGroupDirective parent");this.cardGroupSubscription=this.cardGroup.elements.subscribe(function(t){e.elements=t,e.setupElement("elements")})},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy(),this.cardGroupSubscription&&this.cardGroupSubscription.unsubscribe()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getCardNumber=function(){return this.element},t.prototype.setupElement=function(t){var e=this,n=this.stripeElementsService.mergeOptions(this.options,this.containerClass);this.element&&"options"===t?this.update(n):this.elements&&"elements"===t&&(this.element=this.elements.create("cardNumber",n),this.element.on("change",function(t){return e.change.emit(t)}),this.element.on("blur",function(){return e.blur.emit()}),this.element.on("focus",function(){return e.focus.emit()}),this.element.on("ready",function(){return e.ready.emit()}),this.element.on("escape",function(){return e.escape.emit()}),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element))},t.decorators=[{type:i.Component,args:[{selector:"ngx-stripe-card-number",template:'<div class="field" #stripeElementRef></div>'}]}],t.ctorParameters=function(){return[{type:v},{type:g,decorators:[{type:i.Optional}]}]},t.propDecorators={stripeElementRef:[{type:i.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:i.Input}],options:[{type:i.Input}],load:[{type:i.Output}],blur:[{type:i.Output}],change:[{type:i.Output}],focus:[{type:i.Output}],ready:[{type:i.Output}],escape:[{type:i.Output}]},t}(),w=function(){function t(t,e){this.stripeElementsService=t,this.cardGroup=e,this.load=new i.EventEmitter,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ready=new i.EventEmitter,this.escape=new i.EventEmitter}return t.prototype.ngOnChanges=function(e){return n(this,void 0,void 0,function(){return a(this,function(t){return(e.options||e.containerClass)&&this.setupElement("options"),[2]})})},t.prototype.ngOnInit=function(){var e=this;if(!this.cardGroup)throw new Error("StripeCardExpiryComponent must have StripeCardGroupDirective parent");this.cardGroupSubscription=this.cardGroup.elements.subscribe(function(t){e.elements=t,e.setupElement("elements")})},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy(),this.cardGroupSubscription&&this.cardGroupSubscription.unsubscribe()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getCardExpiry=function(){return this.element},t.prototype.setupElement=function(t){var e=this,n=this.stripeElementsService.mergeOptions(this.options,this.containerClass);this.element&&"options"===t?this.update(n):this.elements&&"elements"===t&&(this.element=this.elements.create("cardExpiry",n),this.element.on("change",function(t){return e.change.emit(t)}),this.element.on("blur",function(){return e.blur.emit()}),this.element.on("focus",function(){return e.focus.emit()}),this.element.on("ready",function(){return e.ready.emit()}),this.element.on("escape",function(){return e.escape.emit()}),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element))},t.decorators=[{type:i.Component,args:[{selector:"ngx-stripe-card-expiry",template:'<div class="field" #stripeElementRef></div>'}]}],t.ctorParameters=function(){return[{type:v},{type:g,decorators:[{type:i.Optional}]}]},t.propDecorators={stripeElementRef:[{type:i.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:i.Input}],options:[{type:i.Input}],load:[{type:i.Output}],blur:[{type:i.Output}],change:[{type:i.Output}],focus:[{type:i.Output}],ready:[{type:i.Output}],escape:[{type:i.Output}]},t}(),O=function(){function t(t,e){this.stripeElementsService=t,this.cardGroup=e,this.load=new i.EventEmitter,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ready=new i.EventEmitter,this.escape=new i.EventEmitter}return t.prototype.ngOnChanges=function(e){return n(this,void 0,void 0,function(){return a(this,function(t){return(e.options||e.containerClass)&&this.setupElement("options"),[2]})})},t.prototype.ngOnInit=function(){var e=this;if(!this.cardGroup)throw new Error("StripeCardCvcComponent must have StripeCardGroupDirective parent");this.cardGroupSubscription=this.cardGroup.elements.subscribe(function(t){e.elements=t,e.setupElement("elements")})},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy(),this.cardGroupSubscription&&this.cardGroupSubscription.unsubscribe()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getCardCvc=function(){return this.element},t.prototype.setupElement=function(t){var e=this,n=this.stripeElementsService.mergeOptions(this.options,this.containerClass);this.element&&"options"===t?this.update(n):this.elements&&"elements"===t&&(this.element=this.elements.create("cardCvc",n),this.element.on("change",function(t){return e.change.emit(t)}),this.element.on("blur",function(){return e.blur.emit()}),this.element.on("focus",function(){return e.focus.emit()}),this.element.on("ready",function(){return e.ready.emit()}),this.element.on("escape",function(){return e.escape.emit()}),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element))},t.decorators=[{type:i.Component,args:[{selector:"ngx-stripe-card-cvc",template:'<div class="field" #stripeElementRef></div>'}]}],t.ctorParameters=function(){return[{type:v},{type:g,decorators:[{type:i.Optional}]}]},t.propDecorators={stripeElementRef:[{type:i.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:i.Input}],options:[{type:i.Input}],load:[{type:i.Output}],blur:[{type:i.Output}],change:[{type:i.Output}],focus:[{type:i.Output}],ready:[{type:i.Output}],escape:[{type:i.Output}]},t}(),S=function(){function t(t){this.stripeElementsService=t,this.load=new i.EventEmitter,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ready=new i.EventEmitter,this.escape=new i.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(i){return n(this,void 0,void 0,function(){var e,n,r;return a(this,function(t){switch(t.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,i.elementsOptions||i.stripe||!this.elements?[4,(r=this).stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]:[3,2];case 1:r.elements=t.sent(),n=!0,t.label=2;case 2:return(i.options||i.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}})})},t.prototype.ngOnInit=function(){return n(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",[4,(e=this).stripeElementsService.elements(this.stripe).toPromise()]);case 1:e.elements=t.sent(),this.createElement(),this.state="ready",t.label=2;case 2:return[2]}})})},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getFpxBank=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={accountHolderType:"individual"}),this.element=this.elements.create("fpxBank",t),this.element.on("change",function(t){return e.change.emit(t)}),this.element.on("blur",function(){return e.blur.emit()}),this.element.on("focus",function(){return e.focus.emit()}),this.element.on("ready",function(){return e.ready.emit()}),this.element.on("escape",function(){return e.escape.emit()}),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t.decorators=[{type:i.Component,args:[{selector:"ngx-stripe-fpx-bank",template:'<div class="field" #stripeElementRef></div>'}]}],t.ctorParameters=function(){return[{type:v}]},t.propDecorators={stripeElementRef:[{type:i.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:i.Input}],options:[{type:i.Input}],elementsOptions:[{type:i.Input}],stripe:[{type:i.Input}],load:[{type:i.Output}],blur:[{type:i.Output}],change:[{type:i.Output}],focus:[{type:i.Output}],ready:[{type:i.Output}],escape:[{type:i.Output}]},t}(),C=function(){function t(t){this.stripeElementsService=t,this.load=new i.EventEmitter,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ready=new i.EventEmitter,this.escape=new i.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(i){return n(this,void 0,void 0,function(){var e,n,r;return a(this,function(t){switch(t.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,i.elementsOptions||i.stripe||!this.elements?[4,(r=this).stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]:[3,2];case 1:r.elements=t.sent(),n=!0,t.label=2;case 2:return(i.options||i.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}})})},t.prototype.ngOnInit=function(){return n(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",[4,(e=this).stripeElementsService.elements(this.stripe).toPromise()]);case 1:e.elements=t.sent(),this.createElement(),this.state="ready",t.label=2;case 2:return[2]}})})},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getIdealBank=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={}),this.element=this.elements.create("idealBank",t),this.element.on("change",function(t){return e.change.emit(t)}),this.element.on("blur",function(){return e.blur.emit()}),this.element.on("focus",function(){return e.focus.emit()}),this.element.on("ready",function(){return e.ready.emit()}),this.element.on("escape",function(){return e.escape.emit()}),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t.decorators=[{type:i.Component,args:[{selector:"ngx-stripe-ideal-bank",template:'<div class="field" #stripeElementRef></div>'}]}],t.ctorParameters=function(){return[{type:v}]},t.propDecorators={stripeElementRef:[{type:i.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:i.Input}],options:[{type:i.Input}],elementsOptions:[{type:i.Input}],stripe:[{type:i.Input}],load:[{type:i.Output}],blur:[{type:i.Output}],change:[{type:i.Output}],focus:[{type:i.Output}],ready:[{type:i.Output}],escape:[{type:i.Output}]},t}(),P=function(){function t(t){this.stripeElementsService=t,this.load=new i.EventEmitter,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ready=new i.EventEmitter,this.escape=new i.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(i){return n(this,void 0,void 0,function(){var e,n,r;return a(this,function(t){switch(t.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,i.elementsOptions||i.stripe||!this.elements?[4,(r=this).stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]:[3,2];case 1:r.elements=t.sent(),n=!0,t.label=2;case 2:return(i.options||i.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}})})},t.prototype.ngOnInit=function(){return n(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",[4,(e=this).stripeElementsService.elements(this.stripe).toPromise()]);case 1:e.elements=t.sent(),this.createElement(),this.state="ready",t.label=2;case 2:return[2]}})})},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getIban=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={}),this.element=this.elements.create("iban",t),this.element.on("change",function(t){return e.change.emit(t)}),this.element.on("blur",function(){return e.blur.emit()}),this.element.on("focus",function(){return e.focus.emit()}),this.element.on("ready",function(){return e.ready.emit()}),this.element.on("escape",function(){return e.escape.emit()}),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t.decorators=[{type:i.Component,args:[{selector:"ngx-stripe-iban",template:'<div class="field" #stripeElementRef></div>'}]}],t.ctorParameters=function(){return[{type:v}]},t.propDecorators={stripeElementRef:[{type:i.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:i.Input}],options:[{type:i.Input}],elementsOptions:[{type:i.Input}],stripe:[{type:i.Input}],load:[{type:i.Output}],blur:[{type:i.Output}],change:[{type:i.Output}],focus:[{type:i.Output}],ready:[{type:i.Output}],escape:[{type:i.Output}]},t}(),I=function(){function t(t){this.stripeElementsService=t,this.load=new i.EventEmitter,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ready=new i.EventEmitter,this.escape=new i.EventEmitter,this.state="notready"}return t.prototype.ngOnChanges=function(i){return n(this,void 0,void 0,function(){var e,n,r;return a(this,function(t){switch(t.label){case 0:return this.state="starting",e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=!1,i.elementsOptions||i.stripe||!this.elements?[4,(r=this).stripeElementsService.elements(this.stripe,this.elementsOptions).toPromise()]:[3,2];case 1:r.elements=t.sent(),n=!0,t.label=2;case 2:return(i.options||i.containerClass||!this.element||n)&&(this.element&&!n?this.update(e):this.elements&&n&&this.createElement(e)),this.state="ready",[2]}})})},t.prototype.ngOnInit=function(){return n(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return"notready"!==this.state?[3,2]:(this.state="starting",[4,(e=this).stripeElementsService.elements(this.stripe).toPromise()]);case 1:e.elements=t.sent(),this.createElement(),this.state="ready",t.label=2;case 2:return[2]}})})},t.prototype.ngOnDestroy=function(){this.element&&this.element.destroy()},t.prototype.update=function(t){this.element.update(t)},t.prototype.getAuBankAccount=function(){return this.element},t.prototype.createElement=function(t){var e=this;void 0===t&&(t={}),this.element=this.elements.create("auBankAccount",t),this.element.on("change",function(t){return e.change.emit(t)}),this.element.on("blur",function(){return e.blur.emit()}),this.element.on("focus",function(){return e.focus.emit()}),this.element.on("ready",function(){return e.ready.emit()}),this.element.on("escape",function(){return e.escape.emit()}),this.element.mount(this.stripeElementRef.nativeElement),this.load.emit(this.element)},t.decorators=[{type:i.Component,args:[{selector:"ngx-stripe-au-bank-account",template:'<div class="field" #stripeElementRef></div>'}]}],t.ctorParameters=function(){return[{type:v}]},t.propDecorators={stripeElementRef:[{type:i.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:i.Input}],options:[{type:i.Input}],elementsOptions:[{type:i.Input}],stripe:[{type:i.Input}],load:[{type:i.Output}],blur:[{type:i.Output}],change:[{type:i.Output}],focus:[{type:i.Output}],ready:[{type:i.Output}],escape:[{type:i.Output}]},t}(),R=function(){function t(t){this.stripeElementsService=t,this.load=new i.EventEmitter,this.change=new i.EventEmitter,this.blur=new i.EventEmitter,this.focus=new i.EventEmitter,this.ready=new i.EventEmitter,this.token=new i.EventEmitter,this.paymentMethod=new i.EventEmitter,this.source=new i.EventEmitter,this.cancel=new i.EventEmitter,this.shippingaddresschange=new i.EventEmitter,this.shippingoptionchange=new i.EventEmitter,this.notavailable=new i.EventEmitter}return t.prototype.ngOnChanges=function(p){return n(this,void 0,void 0,function(){var e,n,r,i,s,o=this;return a(this,function(t){switch(t.label){case 0:return e=this.stripeElementsService.mergeOptions(this.options,this.containerClass),n=this.elementsOptions,r=this.stripe,i=!1,p.elementsOptions||p.stripe||!this.elements?[4,this.stripeElementsService.elements(r,n).toPromise()]:[3,2];case 1:s=t.sent(),this.elements=s,i=!0,t.label=2;case 2:return p.paymentOptions&&this.paymentRequest&&this.updateRequest(this.paymentOptions),(p.options||p.containerClass||!this.element||i)&&(this.element&&!i?this.update(e):this.elements&&i&&(this.paymentRequest=this.stripeElementsService.paymentRequest(r,this.paymentOptions),this.paymentRequest.on("token",function(t){return o.token.emit(t)}),this.paymentRequest.on("paymentmethod",function(t){return o.paymentMethod.emit(t)}),this.paymentRequest.on("source",function(t){return o.source.emit(t)}),this.paymentRequest.on("cancel",function(){return o.cancel.emit()}),this.paymentRequest.on("shippingaddresschange",function(t){return o.shippingaddresschange.emit(t)}),this.paymentRequest.on("shippingoptionchange",function(t){return o.shippingoptionchange.emit(t)}),this.element=this.elements.create("paymentRequestButton",u({paymentRequest:this.paymentRequest},e)),this.canMakePayment().subscribe(function(t){t?(o.element.on("click",function(t){return o.change.emit(t)}),o.element.on("blur",function(){return o.blur.emit()}),o.element.on("focus",function(){return o.focus.emit()}),o.element.on("ready",function(){return o.ready.emit()}),o.element.mount(o.stripeElementRef.nativeElement),o.load.emit({paymentRequestButton:o.element,paymentRequest:o.paymentRequest})):o.notavailable.emit()}))),[2]}})})},t.prototype.canMakePayment=function(){return o.from(this.paymentRequest.canMakePayment())},t.prototype.update=function(t){this.element.update(t)},t.prototype.updateRequest=function(t){this.paymentRequest.update(t)},t.prototype.show=function(){this.paymentRequest.show()},t.prototype.getButton=function(){return this.element},t.decorators=[{type:i.Component,args:[{selector:"ngx-stripe-payment-request-button",template:'<div class="field" #stripeElementRef></div>'}]}],t.ctorParameters=function(){return[{type:v}]},t.propDecorators={stripeElementRef:[{type:i.ViewChild,args:["stripeElementRef"]}],containerClass:[{type:i.Input}],paymentOptions:[{type:i.Input}],options:[{type:i.Input}],elementsOptions:[{type:i.Input}],stripe:[{type:i.Input}],load:[{type:i.Output}],change:[{type:i.Output}],blur:[{type:i.Output}],focus:[{type:i.Output}],ready:[{type:i.Output}],token:[{type:i.Output}],paymentMethod:[{type:i.Output}],source:[{type:i.Output}],cancel:[{type:i.Output}],shippingaddresschange:[{type:i.Output}],shippingoptionchange:[{type:i.Output}],notavailable:[{type:i.Output}]},t}(),x=function(){function t(t,e,n,r){this.baseKey=t,this.baseOptions=e,this.loader=n,this.window=r}return t.prototype.create=function(t,e){return t||this.baseKey?new y(this.loader,this.window,t||this.baseKey,e||this.baseOptions):null},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:String,decorators:[{type:i.Inject,args:[c]}]},{type:undefined,decorators:[{type:i.Inject,args:[m]}]},{type:f},{type:h}]},t}(),D=[E,b,w,O,S,C,P,I,R],M=[g],k=function(){function n(){}return n.forRoot=function(t,e){return{ngModule:n,providers:[f,d,x,v,h,l,{provide:c,useValue:t},{provide:m,useValue:e}]}},n.forChild=function(t,e){return{ngModule:n,providers:[f,d,x,v,h,l,{provide:c,useValue:t},{provide:m,useValue:e}]}},n.decorators=[{type:i.NgModule,args:[{declarations:e(D,M),exports:e(D,M)}]}],n}();t.NgxStripeModule=k,t.StripeCardComponent=E,t.StripeCardNumberComponent=b,t.StripeCardExpiryComponent=w,t.StripeCardCvcComponent=O,t.StripeFpxBankComponent=S,t.StripeIbanComponent=P,t.StripeIdealBankComponent=C,t.StripeAuBankAccountComponent=I,t.StripePaymentRequestButtonComponent=R,t.StripeCardGroupDirective=g,t.StripeService=d,t.StripeFactoryService=x,t.StripeInstance=y,t.LazyStripeAPILoader=f,t.WindowRef=h,t.DocumentRef=l,t.StripeElementsService=v,t.STRIPE_PUBLISHABLE_KEY=c,t.STRIPE_OPTIONS=m,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-stripe.umd.min.js.map