{"version":3,"file":"ngx-image-cropper.js","sources":["ts/src/image.utils.ts","ts/src/image-cropper.component.ts","ts/src/image-cropper.module.ts","ts/ngx-image-cropper.ts"],"names":[],"mappings":"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","sourcesContent":["\nexport class ImageUtils {\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nstatic getOrientation(imageBase64: string): number {\n        const /** @type {?} */ view = new DataView(this.base64ToArrayBuffer(imageBase64));\n        if (view.getUint16(0, false) != 0xFFD8) {\n            return -2;\n        }\n        const /** @type {?} */ length = view.byteLength;\n        let /** @type {?} */ offset = 2;\n        while (offset < length) {\n            if (view.getUint16(offset + 2, false) <= 8) return -1;\n            const /** @type {?} */ marker = view.getUint16(offset, false);\n            offset += 2;\n            if (marker == 0xFFE1) {\n                if (view.getUint32(offset += 2, false) != 0x45786966) {\n                    return -1;\n                }\n\n                const /** @type {?} */ little = view.getUint16(offset += 6, false) == 0x4949;\n                offset += view.getUint32(offset + 4, little);\n                const /** @type {?} */ tags = view.getUint16(offset, little);\n                offset += 2;\n                for (let /** @type {?} */ i = 0; i < tags; i++) {\n                    if (view.getUint16(offset + (i * 12), little) == 0x0112) {\n                        return view.getUint16(offset + (i * 12) + 8, little);\n                    }\n                }\n            }\n            else if ((marker & 0xFF00) != 0xFF00) {\n                break;\n            }\n            else {\n                offset += view.getUint16(offset, false);\n            }\n        }\n        return -1;\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate static base64ToArrayBuffer(imageBase64: string) {\n        imageBase64 = imageBase64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n        const /** @type {?} */ binaryString = atob(imageBase64);\n        const /** @type {?} */ len = binaryString.length;\n        const /** @type {?} */ bytes = new Uint8Array(len);\n        for (let /** @type {?} */ i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    }\n/**\n * @param {?} srcBase64\n * @param {?} srcOrientation\n * @param {?} callback\n * @return {?}\n */\nstatic resetOrientation(srcBase64: string, srcOrientation: number, callback: Function) {\n        const /** @type {?} */ img = new Image();\n        img.onload = function () {\n            const /** @type {?} */ width = img.width;\n            const /** @type {?} */ height = img.height;\n            const /** @type {?} */ canvas = document.createElement('canvas');\n            const /** @type {?} */ ctx = canvas.getContext('2d');\n\n            if (ctx) {\n                if (4 < srcOrientation && srcOrientation < 9) {\n                    canvas.width = height;\n                    canvas.height = width;\n                } else {\n                    canvas.width = width;\n                    canvas.height = height;\n                }\n                ImageUtils.transformCanvas(ctx, srcOrientation, width, height);\n                ctx.drawImage(img, 0, 0);\n                callback(canvas.toDataURL());\n            } else {\n                callback(srcBase64);\n            }\n        };\n        img.src = srcBase64;\n    }\n/**\n * @param {?} ctx\n * @param {?} orientation\n * @param {?} width\n * @param {?} height\n * @return {?}\n */\nprivate static transformCanvas(ctx: any, orientation: number, width: number, height: number) {\n        switch (orientation) {\n            case 2:\n                ctx.transform(-1, 0, 0, 1, width, 0);\n                break;\n            case 3:\n                ctx.transform(-1, 0, 0, -1, width, height);\n                break;\n            case 4:\n                ctx.transform(1, 0, 0, -1, 0, height);\n                break;\n            case 5:\n                ctx.transform(0, 1, 1, 0, 0, 0);\n                break;\n            case 6:\n                ctx.transform(0, 1, -1, 0, height, 0);\n                break;\n            case 7:\n                ctx.transform(0, -1, -1, 0, height, width);\n                break;\n            case 8:\n                ctx.transform(0, -1, 1, 0, 0, width);\n                break;\n            default:\n                break;\n        }\n    }\n}\n","import {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    Input,\n    OnChanges,\n    Output,\n    SimpleChanges,\n    ChangeDetectorRef,\n    ChangeDetectionStrategy\n} from '@angular/core';\nimport { DomSanitizer, SafeUrl, SafeStyle } from '@angular/platform-browser';\nimport { ImageUtils } from './image.utils';\n\ninterface MoveStart {\n    active: boolean;\n    type: string | null;\n    position: string | null;\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n    clientX: number;\n    clientY: number;\n}\n\ninterface Dimensions {\n    width: number;\n    height: number;\n}\n\nexport interface CropperPosition {\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n}\nexport class ImageCropperComponent implements OnChanges {\nprivate originalImage: any;\nprivate moveStart: MoveStart;\nprivate maxSize: Dimensions;\nprivate originalSize: Dimensions;\n\n    safeImgDataUrl: SafeUrl | string;\n    marginLeft: SafeStyle | string = '0px';\n    imageVisible = false;\n/**\n * @param {?} file\n * @return {?}\n */\nset imageFileChanged(file: File) {\n        this.initCropper();\n        if (file) {\n            this.loadImageFile(file);\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nset imageChangedEvent(event: any) {\n        this.initCropper();\n        if (event && event.target && event.target.files && event.target.files.length > 0) {\n            this.loadImageFile(event.target.files[0]);\n        }\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nset imageBase64(imageBase64: string) {\n        this.initCropper();\n        this.loadBase64Image(imageBase64);\n    }\n\n     format: 'png' | 'jpeg' | 'bmp' | 'webp' | 'ico' = 'png';\n     maintainAspectRatio = true;\n     aspectRatio = 1;\n     resizeToWidth = 0;\n     onlyScaleDown = false;\n     imageQuality = 92;\n     cropper: CropperPosition = {\n        x1: -100,\n        y1: -100,\n        x2: 10000,\n        y2: 10000\n    };\n\n     imageCropped = new EventEmitter<string>();\n     imageLoaded = new EventEmitter<void>();\n     loadImageFailed = new EventEmitter<void>();\n/**\n * @param {?} elementRef\n * @param {?} sanitizer\n * @param {?} cd\n */\nconstructor(private elementRef: ElementRef,\nprivate sanitizer: DomSanitizer,\nprivate cd: ChangeDetectorRef) {\n        this.initCropper();\n    }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges): void {\n        if (changes['cropper']) {\n            setTimeout(() => {\n                this.setMaxSize();\n                this.checkCropperPosition(false);\n                this.crop();\n                this.cd.markForCheck();\n            });\n        }\n    }\n/**\n * @return {?}\n */\nprivate initCropper() {\n        this.imageVisible = false;\n        this.originalImage = null;\n        this.safeImgDataUrl = 'data:image/png;base64,iVBORw0KGg'\n            + 'oAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAU'\n            + 'AAarVyFEAAAAASUVORK5CYII=';\n        this.moveStart = {\n            active: false,\n            type: null,\n            position: null,\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0,\n            clientX: 0,\n            clientY: 0\n        };\n        this.maxSize = {\n            width: 0,\n            height: 0\n        };\n        this.originalSize = {\n            width: 0,\n            height: 0\n        };\n        this.cropper.x1 = -100;\n        this.cropper.y1 = -100;\n        this.cropper.x2 = 10000;\n        this.cropper.y2 = 10000;\n    }\n/**\n * @param {?} file\n * @return {?}\n */\nprivate loadImageFile(file: File) {\n        const /** @type {?} */ fileReader = new FileReader();\n        fileReader.onload = (event: any) => {\n            const /** @type {?} */ imageType = file.type;\n            if (this.isValidImageType(imageType)) {\n                this.checkExifRotationAndLoadImage(event.target.result);\n            } else {\n                this.loadImageFailed.emit();\n            }\n        };\n        fileReader.readAsDataURL(file);\n    }\n/**\n * @param {?} type\n * @return {?}\n */\nprivate isValidImageType(type: string) {\n        return type === 'image/jpeg'\n            || type === 'image/jpg'\n            || type === 'image/png'\n            || type === 'image/gif'\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate checkExifRotationAndLoadImage(imageBase64: string) {\n        const /** @type {?} */ exifRotation = ImageUtils.getOrientation(imageBase64);\n        if (exifRotation > 1) {\n            ImageUtils.resetOrientation(\n                imageBase64,\n                exifRotation,\n                (rotatedBase64: string) => this.loadBase64Image(rotatedBase64)\n            );\n        } else {\n            this.loadBase64Image(imageBase64);\n        }\n    }\n/**\n * @param {?} imageBase64\n * @return {?}\n */\nprivate loadBase64Image(imageBase64: string) {\n        this.originalImage = new Image();\n        this.originalImage.onload = () => {\n            this.originalSize.width = this.originalImage.width;\n            this.originalSize.height = this.originalImage.height;\n            this.cd.markForCheck();\n        };\n        this.safeImgDataUrl = this.sanitizer.bypassSecurityTrustResourceUrl(imageBase64);\n        this.originalImage.src = imageBase64;\n    }\n/**\n * @return {?}\n */\nimageLoadedInView(): void {\n        if (this.originalImage != null) {\n            this.imageLoaded.emit();\n            setTimeout(() => {\n                this.setMaxSize();\n                this.resetCropperPosition();\n                this.cd.markForCheck();\n            });\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nonResize(event: Event) {\n        this.resizeCropperPosition();\n        this.setMaxSize();\n    }\n/**\n * @return {?}\n */\nprivate resizeCropperPosition() {\n        const /** @type {?} */ displayedImage = this.elementRef.nativeElement.querySelector('.source-image');\n        if (this.maxSize.width !== displayedImage.offsetWidth || this.maxSize.height !== displayedImage.offsetHeight) {\n            this.cropper.x1 = this.cropper.x1 * displayedImage.offsetWidth / this.maxSize.width;\n            this.cropper.x2 = this.cropper.x2 * displayedImage.offsetWidth / this.maxSize.width;\n            this.cropper.y1 = this.cropper.y1 * displayedImage.offsetHeight / this.maxSize.height;\n            this.cropper.y2 = this.cropper.y2 * displayedImage.offsetHeight / this.maxSize.height;\n        }\n    }\n/**\n * @return {?}\n */\nprivate resetCropperPosition() {\n        const /** @type {?} */ displayedImage = this.elementRef.nativeElement.querySelector('.source-image');\n        if (displayedImage.offsetWidth / this.aspectRatio < displayedImage.offsetHeight) {\n            this.cropper.x1 = 0;\n            this.cropper.x2 = displayedImage.offsetWidth;\n            const /** @type {?} */ cropperHeight = displayedImage.offsetWidth / this.aspectRatio;\n            this.cropper.y1 = (displayedImage.offsetHeight - cropperHeight) / 2;\n            this.cropper.y2 = this.cropper.y1 + cropperHeight;\n        } else {\n            this.cropper.y1 = 0;\n            this.cropper.y2 = displayedImage.offsetHeight;\n            const /** @type {?} */ cropperWidth = displayedImage.offsetHeight * this.aspectRatio;\n            this.cropper.x1 = (displayedImage.offsetWidth - cropperWidth) / 2;\n            this.cropper.x2 = this.cropper.x1 + cropperWidth;\n        }\n        this.crop();\n        this.imageVisible = true;\n    }\n/**\n * @param {?} event\n * @param {?} moveType\n * @param {?=} position\n * @return {?}\n */\nstartMove(event: any, moveType: string, position: string | null = null) {\n        this.moveStart.active = true;\n        this.moveStart.type = moveType;\n        this.moveStart.position = position;\n        this.moveStart.clientX = this.getClientX(event);\n        this.moveStart.clientY = this.getClientY(event);\n        Object.assign(this.moveStart, this.cropper);\n        this.cd.markForCheck();\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nmoveImg(event: any) {\n        if (this.moveStart.active) {\n            event.stopPropagation();\n            event.preventDefault();\n            this.setMaxSize();\n            if (this.moveStart.type === 'move') {\n                this.move(event);\n                this.checkCropperPosition(true);\n            } else if (this.moveStart.type === 'resize') {\n                this.resize(event);\n                this.checkCropperPosition(false);\n            }\n            this.cd.markForCheck();\n        }\n    }\n/**\n * @return {?}\n */\nprivate setMaxSize() {\n        const /** @type {?} */ el = this.elementRef.nativeElement.querySelector('.source-image');\n        this.maxSize.width = el.offsetWidth;\n        this.maxSize.height = el.offsetHeight;\n        this.marginLeft = this.sanitizer.bypassSecurityTrustStyle('calc(50% - ' + this.maxSize.width / 2 + 'px)');\n    }\n/**\n * @param {?=} maintainSize\n * @return {?}\n */\nprivate checkCropperPosition(maintainSize = false) {\n        if (this.cropper.x1 < 0) {\n            this.cropper.x2 -= maintainSize ? this.cropper.x1 : 0;\n            this.cropper.x1 = 0;\n        }\n        if (this.cropper.y1 < 0) {\n            this.cropper.y2 -= maintainSize ? this.cropper.y1 : 0;\n            this.cropper.y1 = 0;\n        }\n        if (this.cropper.x2 > this.maxSize.width) {\n            this.cropper.x1 -= maintainSize ? (this.cropper.x2 - this.maxSize.width) : 0;\n            this.cropper.x2 = this.maxSize.width;\n        }\n        if (this.cropper.y2 > this.maxSize.height) {\n            this.cropper.y1 -= maintainSize ? (this.cropper.y2 - this.maxSize.height) : 0;\n            this.cropper.y2 = this.maxSize.height;\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nmoveStop(event: any) {\n        if (this.moveStart.active) {\n            this.moveStart.active = false;\n            this.crop();\n            this.cd.markForCheck();\n        }\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate move(event: any) {\n        const /** @type {?} */ diffX = this.getClientX(event) - this.moveStart.clientX;\n        const /** @type {?} */ diffY = this.getClientY(event) - this.moveStart.clientY;\n\n        this.cropper.x1 = this.moveStart.x1 + diffX;\n        this.cropper.y1 = this.moveStart.y1 + diffY;\n        this.cropper.x2 = this.moveStart.x2 + diffX;\n        this.cropper.y2 = this.moveStart.y2 + diffY;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate resize(event: any) {\n        const /** @type {?} */ diffX = this.getClientX(event) - this.moveStart.clientX;\n        const /** @type {?} */ diffY = this.getClientY(event) - this.moveStart.clientY;\n        switch (this.moveStart.position) {\n            case 'left':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - 20);\n                break;\n            case 'topleft':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - 20);\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - 20);\n                break;\n            case 'top':\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - 20);\n                break;\n            case 'topright':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + 20);\n                this.cropper.y1 = Math.min(this.moveStart.y1 + diffY, this.cropper.y2 - 20);\n                break;\n            case 'right':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + 20);\n                break;\n            case 'bottomright':\n                this.cropper.x2 = Math.max(this.moveStart.x2 + diffX, this.cropper.x1 + 20);\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + 20);\n                break;\n            case 'bottom':\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + 20);\n                break;\n            case 'bottomleft':\n                this.cropper.x1 = Math.min(this.moveStart.x1 + diffX, this.cropper.x2 - 20);\n                this.cropper.y2 = Math.max(this.moveStart.y2 + diffY, this.cropper.y1 + 20);\n                break;\n        }\n\n        if (this.maintainAspectRatio) {\n            this.checkAspectRatio();\n        }\n    }\n/**\n * @return {?}\n */\nprivate checkAspectRatio() {\n        let /** @type {?} */ overflowX = 0;\n        let /** @type {?} */ overflowY = 0;\n\n        switch (this.moveStart.position) {\n            case 'top':\n                this.cropper.x2 = this.cropper.x1 + (this.cropper.y2 - this.cropper.y1) * this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'bottom':\n                this.cropper.x2 = this.cropper.x1 + (this.cropper.y2 - this.cropper.y1) * this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : (overflowX / this.aspectRatio);\n                }\n                break;\n            case 'topleft':\n                this.cropper.y1 = this.cropper.y2 - (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(0 - this.cropper.x1, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x1 += (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'topright':\n                this.cropper.y1 = this.cropper.y2 - (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(0 - this.cropper.y1, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y1 += (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'right':\n            case 'bottomright':\n                this.cropper.y2 = this.cropper.y1 + (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(this.cropper.x2 - this.maxSize.width, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x2 -= (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n            case 'left':\n            case 'bottomleft':\n                this.cropper.y2 = this.cropper.y1 + (this.cropper.x2 - this.cropper.x1) / this.aspectRatio;\n                overflowX = Math.max(0 - this.cropper.x1, 0);\n                overflowY = Math.max(this.cropper.y2 - this.maxSize.height, 0);\n                if (overflowX > 0 || overflowY > 0) {\n                    this.cropper.x1 += (overflowY * this.aspectRatio) > overflowX ? (overflowY * this.aspectRatio) : overflowX;\n                    this.cropper.y2 -= (overflowY * this.aspectRatio) > overflowX ? overflowY : overflowX / this.aspectRatio;\n                }\n                break;\n        }\n    }\n/**\n * @return {?}\n */\nprivate crop() {\n        const /** @type {?} */ displayedImage = this.elementRef.nativeElement.querySelector('.source-image');\n        if (displayedImage && this.originalImage != null) {\n            const /** @type {?} */ ratio = this.originalSize.width / displayedImage.offsetWidth;\n            const /** @type {?} */ left = Math.round(this.cropper.x1 * ratio);\n            const /** @type {?} */ top = Math.round(this.cropper.y1 * ratio);\n            const /** @type {?} */ width = Math.round((this.cropper.x2 - this.cropper.x1) * ratio);\n            const /** @type {?} */ height = Math.round((this.cropper.y2 - this.cropper.y1) * ratio);\n            const /** @type {?} */ resizeRatio = this.getResizeRatio(width);\n            const /** @type {?} */ cropCanvas = /** @type {?} */(( document.createElement('canvas') as HTMLCanvasElement));\n            cropCanvas.width = width * resizeRatio;\n            cropCanvas.height = height * resizeRatio;\n            const /** @type {?} */ ctx = cropCanvas.getContext('2d');\n            if (ctx) {\n                ctx.drawImage(this.originalImage, left, top, width, height, 0, 0, width * resizeRatio, height * resizeRatio);\n                const /** @type {?} */ quality = Math.min(1, Math.max(0, this.imageQuality / 100));\n                const /** @type {?} */ croppedImage = cropCanvas.toDataURL('image/' + this.format, quality);\n                if (croppedImage.length > 10) {\n                    this.imageCropped.emit(croppedImage);\n                }\n            }\n        }\n    }\n/**\n * @param {?} width\n * @return {?}\n */\nprivate getResizeRatio(width: number): number {\n        return this.resizeToWidth > 0 && (!this.onlyScaleDown || width > this.resizeToWidth)\n            ? this.resizeToWidth / width\n            : 1;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate getClientX(event: any) {\n        return event.clientX != null ? event.clientX : event.touches[0].clientX;\n    }\n/**\n * @param {?} event\n * @return {?}\n */\nprivate getClientY(event: any) {\n        return event.clientY != null ? event.clientY : event.touches[0].clientY;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n    selector: 'image-cropper',\n    template: `\n      <div>\n          <img\n              [src]=\"safeImgDataUrl\"\n              [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\n              (load)=\"imageLoadedInView()\"\n              class=\"source-image\"\n          />\n          <div class=\"cropper\"\n               [style.top.px]=\"cropper.y1\"\n               [style.left.px]=\"cropper.x1\"\n               [style.width.px]=\"cropper.x2 - cropper.x1\"\n               [style.height.px]=\"cropper.y2 - cropper.y1\"\n               [style.margin-left]=\"marginLeft\"\n               [style.visibility]=\"imageVisible ? 'visible' : 'hidden'\"\n          >\n              <div\n                  (mousedown)=\"startMove($event, 'move')\"\n                  (touchstart)=\"startMove($event, 'move')\"\n                  class=\"move\"\n              >&nbsp;</div>\n              <span\n                  class=\"resize topleft\"\n                  (mousedown)=\"startMove($event, 'resize', 'topleft')\"\n                  (touchstart)=\"startMove($event, 'resize', 'topleft')\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize top\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize topright\"\n                  (mousedown)=\"startMove($event, 'resize', 'topright')\"\n                  (touchstart)=\"startMove($event, 'resize', 'topright')\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize right\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize bottomright\"\n                  (mousedown)=\"startMove($event, 'resize', 'bottomright')\"\n                  (touchstart)=\"startMove($event, 'resize', 'bottomright')\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize bottom\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize bottomleft\"\n                  (mousedown)=\"startMove($event, 'resize', 'bottomleft')\"\n                  (touchstart)=\"startMove($event, 'resize', 'bottomleft')\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize left\"\n              ><span class=\"square\"></span></span>\n              <span\n                  class=\"resize-bar top\"\n                  (mousedown)=\"startMove($event, 'resize', 'top')\"\n                  (touchstart)=\"startMove($event, 'resize', 'top')\"\n              ></span>\n              <span\n                  class=\"resize-bar right\"\n                  (mousedown)=\"startMove($event, 'resize', 'right')\"\n                  (touchstart)=\"startMove($event, 'resize', 'right')\"\n              ></span>\n              <span\n                  class=\"resize-bar bottom\"\n                  (mousedown)=\"startMove($event, 'resize', 'bottom')\"\n                  (touchstart)=\"startMove($event, 'resize', 'bottom')\"\n              ></span>\n              <span\n                  class=\"resize-bar left\"\n                  (mousedown)=\"startMove($event, 'resize', 'left')\"\n                  (touchstart)=\"startMove($event, 'resize', 'left')\"\n              ></span>\n          </div>\n      </div>\n    `,\n    styles: [`\n      :host {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        position: relative;\n        width: 100%;\n        max-width: 100%;\n        max-height: 100%;\n        overflow: hidden;\n        padding: 5px;\n        text-align: center;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none; }\n        :host > div {\n          position: relative;\n          width: 100%; }\n          :host > div .source-image {\n            max-width: 100%;\n            max-height: 100%; }\n        :host .cropper {\n          position: absolute;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          color: #53535C !important;\n          background: transparent !important;\n          outline-color: rgba(255, 255, 255, 0.3);\n          outline-width: 1000px;\n          outline-style: solid;\n          -ms-touch-action: none;\n              touch-action: none; }\n          :host .cropper:after {\n            position: absolute;\n            content: '';\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            pointer-events: none;\n            border: dashed 1px;\n            opacity: .75;\n            color: inherit;\n            z-index: 1; }\n          :host .cropper .move {\n            width: 100%;\n            cursor: move;\n            border: 1px solid rgba(255, 255, 255, 0.5); }\n          :host .cropper .resize {\n            position: absolute;\n            display: inline-block;\n            line-height: 6px;\n            padding: 8px;\n            opacity: .85;\n            z-index: 1; }\n            :host .cropper .resize .square {\n              display: inline-block;\n              background: #53535C !important;\n              width: 6px;\n              height: 6px;\n              border: 1px solid rgba(255, 255, 255, 0.5); }\n            :host .cropper .resize.topleft {\n              top: -12px;\n              left: -12px;\n              cursor: nw-resize; }\n            :host .cropper .resize.top {\n              top: -12px;\n              left: calc(50% - 12px);\n              cursor: n-resize; }\n            :host .cropper .resize.topright {\n              top: -12px;\n              right: -12px;\n              cursor: ne-resize; }\n            :host .cropper .resize.right {\n              top: calc(50% - 12px);\n              right: -12px;\n              cursor: e-resize; }\n            :host .cropper .resize.bottomright {\n              bottom: -12px;\n              right: -12px;\n              cursor: se-resize; }\n            :host .cropper .resize.bottom {\n              bottom: -12px;\n              left: calc(50% - 12px);\n              cursor: s-resize; }\n            :host .cropper .resize.bottomleft {\n              bottom: -12px;\n              left: -12px;\n              cursor: sw-resize; }\n            :host .cropper .resize.left {\n              top: calc(50% - 12px);\n              left: -12px;\n              cursor: w-resize; }\n          :host .cropper .resize-bar {\n            position: absolute;\n            z-index: 1; }\n            :host .cropper .resize-bar.top {\n              top: -11px;\n              left: 11px;\n              width: calc(100% - 22px);\n              height: 22px;\n              cursor: n-resize; }\n            :host .cropper .resize-bar.right {\n              top: 11px;\n              right: -11px;\n              height: calc(100% - 22px);\n              width: 22px;\n              cursor: e-resize; }\n            :host .cropper .resize-bar.bottom {\n              bottom: -11px;\n              left: 11px;\n              width: calc(100% - 22px);\n              height: 22px;\n              cursor: s-resize; }\n            :host .cropper .resize-bar.left {\n              top: 11px;\n              left: -11px;\n              height: calc(100% - 22px);\n              width: 22px;\n              cursor: w-resize; }\n    `],\n    changeDetection: ChangeDetectionStrategy.OnPush\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: DomSanitizer, },\n{type: ChangeDetectorRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'imageFileChanged': [{ type: Input },],\n'imageChangedEvent': [{ type: Input },],\n'imageBase64': [{ type: Input },],\n'format': [{ type: Input },],\n'maintainAspectRatio': [{ type: Input },],\n'aspectRatio': [{ type: Input },],\n'resizeToWidth': [{ type: Input },],\n'onlyScaleDown': [{ type: Input },],\n'imageQuality': [{ type: Input },],\n'cropper': [{ type: Input },],\n'imageCropped': [{ type: Output },],\n'imageLoaded': [{ type: Output },],\n'loadImageFailed': [{ type: Output },],\n'onResize': [{ type: HostListener, args: ['window:resize', ['$event'], ] },],\n'moveImg': [{ type: HostListener, args: ['document:mousemove', ['$event'], ] },{ type: HostListener, args: ['document:touchmove', ['$event'], ] },],\n'moveStop': [{ type: HostListener, args: ['document:mouseup', ['$event'], ] },{ type: HostListener, args: ['document:touchend', ['$event'], ] },],\n};\n}\n\nfunction ImageCropperComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nImageCropperComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImageCropperComponent.ctorParameters;\n/** @type {?} */\nImageCropperComponent.propDecorators;\n/** @type {?} */\nImageCropperComponent.prototype.originalImage;\n/** @type {?} */\nImageCropperComponent.prototype.moveStart;\n/** @type {?} */\nImageCropperComponent.prototype.maxSize;\n/** @type {?} */\nImageCropperComponent.prototype.originalSize;\n/** @type {?} */\nImageCropperComponent.prototype.safeImgDataUrl;\n/** @type {?} */\nImageCropperComponent.prototype.marginLeft;\n/** @type {?} */\nImageCropperComponent.prototype.imageVisible;\n/** @type {?} */\nImageCropperComponent.prototype.format;\n/** @type {?} */\nImageCropperComponent.prototype.maintainAspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.aspectRatio;\n/** @type {?} */\nImageCropperComponent.prototype.resizeToWidth;\n/** @type {?} */\nImageCropperComponent.prototype.onlyScaleDown;\n/** @type {?} */\nImageCropperComponent.prototype.imageQuality;\n/** @type {?} */\nImageCropperComponent.prototype.cropper;\n/** @type {?} */\nImageCropperComponent.prototype.imageCropped;\n/** @type {?} */\nImageCropperComponent.prototype.imageLoaded;\n/** @type {?} */\nImageCropperComponent.prototype.loadImageFailed;\n/** @type {?} */\nImageCropperComponent.prototype.elementRef;\n/** @type {?} */\nImageCropperComponent.prototype.sanitizer;\n/** @type {?} */\nImageCropperComponent.prototype.cd;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ImageCropperComponent } from './image-cropper.component';\nexport class ImageCropperModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        ImageCropperComponent\n    ],\n    exports: [\n        ImageCropperComponent\n    ]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ImageCropperModule_tsickle_Closure_declarations() {\n/** @type {?} */\nImageCropperModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nImageCropperModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport {ImageCropperModule,ImageCropperComponent} from './index';\n"]}