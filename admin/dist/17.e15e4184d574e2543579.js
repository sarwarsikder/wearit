(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{KTnh:function(t,e,c){"use strict";c.r(e),c.d(e,"NewsletterModule",(function(){return v}));var n=c("tyNb"),i=c("ofXK"),r=c("3Pt+"),o=c("1kSV"),a=c("0OCT"),s=(c("EUDy"),c("fXoL")),u=c("sXYb"),h=function(){function t(t){this.restangular=t}return t.prototype.contacts=function(t){return this.restangular.one("newsletter","contact").get(t).toPromise()},t.prototype.remove=function(t){return this.restangular.one("newsletter","contact").customDELETE(t).toPromise()},t.prototype.sendMail=function(t){return this.restangular.one("newsletter").customPOST(t,"sendmail").toPromise()},t.\u0275fac=function(e){return new(e||t)(s.qc(u.a))},t.\u0275prov=s.Yb({token:t,factory:t.\u0275fac}),t}();function l(t,e){if(1&t){var c=s.jc();s.ic(0,"tr"),s.ic(1,"td"),s.Xc(2),s.hc(),s.ic(3,"td"),s.Xc(4),s.hc(),s.ic(5,"td"),s.ic(6,"span"),s.Xc(7),s.wc(8,"date"),s.hc(),s.hc(),s.ic(9,"td"),s.ic(10,"a",12),s.tc("click",(function(){s.Oc(c);var t=e.$implicit,n=e.index;return s.vc().remove(t,n)})),s.dc(11,"i",13),s.hc(),s.hc(),s.hc()}if(2&t){var n=e.$implicit;s.Pb(2),s.Yc(n.email),s.Pb(2),s.Yc(n.name),s.Pb(3),s.Yc(s.xc(8,3,n.createdAt))}}var d=function(){function t(t,e,c){this.router=t,this.service=e,this.toasty=c,this.items=[],this.page=1,this.total=0,this.search={text:""}}return t.prototype.ngOnInit=function(){this.query()},t.prototype.query=function(){var t=this;this.service.contacts({page:this.page,email:this.search.text}).then((function(e){t.items=e.data.items,t.total=e.data.count})).catch((function(){return alert("Something went wrong, please try again!")}))},t.prototype.remove=function(t,e){var c=this;window.confirm("Are you sure want to delete this contact?")&&this.service.remove(t._id).then((function(){c.toasty.success("Item has been deleted!"),c.items.splice(e,1)})).catch((function(t){return c.toasty.error(t.data.data&&t.data.data.message?t.data.data.message:"Something went wrong, please try again!")}))},t.\u0275fac=function(e){return new(e||t)(s.cc(n.f),s.cc(h),s.cc(a.c))},t.\u0275cmp=s.Wb({type:t,selectors:[["ng-component"]],decls:25,vars:7,consts:[[1,"card"],[1,"card-body","table-responsive"],[1,"table"],["colspan","4"],[1,"input-group","mb-3"],["type","text","placeholder","Search keyword","name","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],[1,"display-inline",3,"hidden"],[1,"pull-right"],[3,"collectionSize","page","maxSize","pageSize","pageChange"],[3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(s.ic(0,"div",0),s.ic(1,"div",1),s.ic(2,"table",2),s.ic(3,"thead"),s.ic(4,"tr"),s.ic(5,"th"),s.Xc(6,"Email"),s.hc(),s.ic(7,"th"),s.Xc(8,"Name"),s.hc(),s.ic(9,"th"),s.Xc(10,"Created at"),s.hc(),s.ic(11,"th"),s.Xc(12,"#"),s.hc(),s.hc(),s.ic(13,"tr"),s.ic(14,"th",3),s.ic(15,"div",4),s.ic(16,"input",5),s.tc("ngModelChange",(function(t){return e.search.text=t})),s.hc(),s.ic(17,"div",6),s.ic(18,"button",7),s.tc("click",(function(){return e.query()})),s.Xc(19,"Search"),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.ic(20,"tbody"),s.Vc(21,l,12,5,"tr",8),s.hc(),s.hc(),s.ic(22,"div",9),s.ic(23,"div",10),s.ic(24,"ngb-pagination",11),s.tc("pageChange",(function(t){return e.page=t}))("pageChange",(function(){return e.query()})),s.hc(),s.hc(),s.hc(),s.hc(),s.hc()),2&t&&(s.Pb(16),s.Cc("ngModel",e.search.text),s.Pb(5),s.Cc("ngForOf",e.items),s.Pb(1),s.Cc("hidden",e.total<10),s.Pb(2),s.Cc("collectionSize",e.total)("page",e.page)("maxSize",5)("pageSize",10))},directives:[r.b,r.h,r.k,i.m,o.g],pipes:[i.e],encapsulation:2}),t}(),p=c("Yn6Y");function g(t,e){if(1&t&&(s.ic(0,"div"),s.ic(1,"p",20),s.Xc(2," Subject is required "),s.hc(),s.hc()),2&t){s.vc();var c=s.Lc(10);s.Pb(1),s.Cc("hidden",!c.errors.required)}}function f(t,e){1&t&&(s.ic(0,"div"),s.ic(1,"p",21),s.Xc(2," Content is required "),s.hc(),s.hc())}var b=function(){return["/newsletter/contacts"]},m=[{path:"contacts",component:d,data:{title:"Manage newsletter contact",urls:[{title:"Newsletter",url:"/newsletter/contact"},{title:"Contact"}]}},{path:"sendmail",component:function(){function t(t,e){this.service=t,this.toasty=e,this.data={subject:"",content:"",userType:""},this.submitted=!1}return t.prototype.ngOnInit=function(){},t.prototype.submit=function(t){var e=this;if(this.submitted=!0,t.invalid||!this.data.subject||!this.data.content)return this.toasty.error("Please enter all content data");this.service.sendMail(this.data).then((function(){e.data={subject:"",content:"",userType:""},e.toasty.success("Mail has been sent!"),e.submitted=!1})).catch((function(){return e.toasty.error("Something went wrong, please try again!")}))},t.\u0275fac=function(e){return new(e||t)(s.cc(h),s.cc(a.c))},t.\u0275cmp=s.Wb({type:t,selectors:[["ng-component"]],decls:40,vars:7,consts:[[1,"card"],[1,"card-body"],[3,"submit"],["frm","ngForm"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["type","text","name","title","placeholder","Enter subject","required","",1,"form-control",3,"ngModel","ngModelChange"],["subject","ngModel"],[4,"ngIf"],["name","user type",1,"form-control",3,"ngModel","ngModelChange"],["label","Users"],["value",""],["value","seller"],["value","user"],["label","Other"],["name","content",3,"froalaEditor","ngModel","ngModelChange"],[1,"col","col-md-12"],["type","submit",1,"btn","btn-primary"],[1,"btn","btn-warning",3,"routerLink"],[1,"error",3,"hidden"],[1,"error"]],template:function(t,e){if(1&t){var c=s.jc();s.ic(0,"div",0),s.ic(1,"div",1),s.ic(2,"form",2,3),s.tc("submit",(function(){s.Oc(c);var t=s.Lc(3);return e.submit(t)})),s.ic(4,"div",4),s.ic(5,"div",5),s.ic(6,"div",6),s.ic(7,"label"),s.Xc(8,"Subject (*)"),s.hc(),s.ic(9,"input",7,8),s.tc("ngModelChange",(function(t){return e.data.subject=t})),s.hc(),s.Vc(11,g,3,1,"div",9),s.hc(),s.hc(),s.ic(12,"div",5),s.ic(13,"div",6),s.ic(14,"label"),s.Xc(15,"User type"),s.hc(),s.ic(16,"select",10),s.tc("ngModelChange",(function(t){return e.data.userType=t})),s.ic(17,"optgroup",11),s.ic(18,"option",12),s.Xc(19,"All users"),s.hc(),s.ic(20,"option",13),s.Xc(21,"Seller"),s.hc(),s.ic(22,"option",14),s.Xc(23,"Registered user"),s.hc(),s.hc(),s.ic(24,"optgroup",15),s.ic(25,"option",12),s.Xc(26,"Newsletter contacts"),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.ic(27,"div",5),s.ic(28,"div",6),s.ic(29,"label"),s.Xc(30,"Content (*)"),s.hc(),s.ic(31,"div",16),s.tc("ngModelChange",(function(t){return e.data.content=t})),s.hc(),s.Vc(32,f,3,0,"div",9),s.hc(),s.hc(),s.ic(33,"div",17),s.ic(34,"div",6),s.ic(35,"button",18),s.Xc(36,"Send"),s.hc(),s.Xc(37,"\xa0 "),s.ic(38,"button",19),s.Xc(39,"Cancel"),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.hc()}2&t&&(s.Pb(9),s.Cc("ngModel",e.data.subject),s.Pb(2),s.Cc("ngIf",e.submitted&&!e.data.subject),s.Pb(5),s.Cc("ngModel",e.data.userType),s.Pb(15),s.Cc("ngModel",e.data.content),s.Pb(1),s.Cc("ngIf",e.submitted&&!e.data.content),s.Pb(6),s.Cc("routerLink",s.Fc(6,b)))},directives:[r.s,r.i,r.j,r.b,r.p,r.h,r.k,i.n,r.q,r.l,r.r,p.a,n.g],encapsulation:2}),t}(),data:{title:"Send newsletter email",urls:[{title:"Newsletter contact",url:"/newsletter/contacts"},{title:"Send newsletter email"}]}}],v=function(){function t(){}return t.\u0275mod=s.ac({type:t}),t.\u0275inj=s.Zb({factory:function(e){return new(e||t)},providers:[h],imports:[[i.b,r.c,n.j.forChild(m),o.f,p.b,p.c]]}),t}()}}]);