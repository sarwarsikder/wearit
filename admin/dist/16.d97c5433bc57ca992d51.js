(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{lyU3:function(t,e,c){"use strict";c.r(e),c.d(e,"MallModule",(function(){return k}));var i=c("ofXK"),n=c("tyNb"),a=(c("EUDy"),c("LvDl")),r=c("fXoL"),l=c("sXYb"),o=function(){function t(t){this.restangular=t,this.allowFields=["title","description","mediaId","address"]}return t.prototype.create=function(t){return this.restangular.all("malls").post(a.pick(t,this.allowFields)).toPromise()},t.prototype.search=function(t){return this.restangular.one("malls").get(t).toPromise()},t.prototype.findOne=function(t){return this.restangular.one("malls",t).get().toPromise()},t.prototype.update=function(t,e){return this.restangular.one("malls",t).customPUT(a.pick(e,this.allowFields)).toPromise()},t.prototype.remove=function(t){return this.restangular.one("malls",t).customDELETE().toPromise()},t.\u0275fac=function(e){return new(e||t)(r.qc(l.a))},t.\u0275prov=r.Yb({token:t,factory:t.\u0275fac}),t}(),s=c("0OCT"),d=c("3Pt+"),h=c("ms+I");function u(t,e){if(1&t&&(r.ic(0,"div"),r.dc(1,"img",15),r.hc()),2&t){var c=r.vc(2);r.Pb(1),r.Cc("src",c.media.thumbUrl,r.Qc)}}function m(t,e){if(1&t){var c=r.jc();r.ic(0,"div",2),r.ic(1,"form",3,4),r.tc("submit",(function(){r.Oc(c);var t=r.Lc(2);return r.vc().submit(t)})),r.ic(3,"div",5),r.ic(4,"div",6),r.ic(5,"div",7),r.ic(6,"label"),r.Xc(7,"Title (*)"),r.hc(),r.ic(8,"input",8),r.tc("ngModelChange",(function(t){return r.Oc(c),r.vc().mall.title=t})),r.hc(),r.hc(),r.hc(),r.ic(9,"div",6),r.ic(10,"div",7),r.ic(11,"label"),r.Xc(12,"Description"),r.hc(),r.ic(13,"textarea",9),r.tc("ngModelChange",(function(t){return r.Oc(c),r.vc().mall.description=t})),r.hc(),r.hc(),r.hc(),r.ic(14,"div",6),r.ic(15,"div",7),r.ic(16,"label"),r.Xc(17,"Image (*) "),r.ic(18,"media-select",10),r.tc("onSelect",(function(t){return r.Oc(c),r.vc().selectMedia(t)})),r.hc(),r.hc(),r.Vc(19,u,2,1,"div",11),r.hc(),r.hc(),r.ic(20,"div",6),r.ic(21,"div",7),r.ic(22,"label"),r.Xc(23,"Address"),r.hc(),r.ic(24,"textarea",12),r.tc("ngModelChange",(function(t){return r.Oc(c),r.vc().mall.address=t})),r.hc(),r.hc(),r.hc(),r.ic(25,"div",13),r.ic(26,"div",7),r.ic(27,"button",14),r.Xc(28,"Submit"),r.hc(),r.hc(),r.hc(),r.hc(),r.hc(),r.hc()}if(2&t){var i=r.vc();r.Pb(8),r.Cc("ngModel",i.mall.title),r.Pb(5),r.Cc("ngModel",i.mall.description),r.Pb(6),r.Cc("ngIf",i.media),r.Pb(5),r.Cc("ngModel",i.mall.address)}}var p=function(){function t(t,e,c){this.router=t,this.mallService=e,this.toasty=c,this.mall={title:"",description:"",address:"",mediaId:null}}return t.prototype.ngOnInit=function(){},t.prototype.selectMedia=function(t){this.media=t},t.prototype.submit=function(t){var e=this;return this.mall.title?this.media?(this.mall.mediaId=this.media._id,void this.mallService.create(this.mall).then((function(){e.toasty.success("Mall has been created"),e.router.navigate(["/malls"])}),(function(t){return e.toasty.error(t.data.message||"Something went wrong!")}))):this.toasty.error("Please browse mall image"):this.toasty.error("Please enter mall title")},t.\u0275fac=function(e){return new(e||t)(r.cc(n.f),r.cc(o),r.cc(s.c))},t.\u0275cmp=r.Wb({type:t,selectors:[["app-mall-create"]],decls:2,vars:1,consts:[[1,"card"],["class","card-body",4,"ngIf"],[1,"card-body"],[3,"submit"],["frm",""],[1,"row"],[1,"col","col-md-6"],[1,"form-group"],["type","text","name","mallTitle","placeholder","Enter Title","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","malldesc","placeholder","Enter some text",1,"form-control",3,"ngModel","ngModelChange"],[3,"onSelect"],[4,"ngIf"],["name","address","placeholder","Enter some text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","col-md-12"],["type","submit",1,"btn","btn-primary"],[1,"img-thumbnail",3,"src"]],template:function(t,e){1&t&&(r.ic(0,"div",0),r.Vc(1,m,29,4,"div",1),r.hc()),2&t&&(r.Pb(1),r.Cc("ngIf",e.mall))},directives:[i.n,d.s,d.i,d.j,d.b,d.p,d.h,d.k,h.a],styles:[""]}),t}();function f(t,e){if(1&t&&(r.ic(0,"div"),r.dc(1,"img",15),r.hc()),2&t){var c=r.vc(2);r.Pb(1),r.Cc("src",c.media.thumbUrl,r.Qc)}}function g(t,e){if(1&t){var c=r.jc();r.ic(0,"div",2),r.ic(1,"form",3,4),r.tc("submit",(function(){r.Oc(c);var t=r.Lc(2);return r.vc().submit(t)})),r.ic(3,"div",5),r.ic(4,"div",6),r.ic(5,"div",7),r.ic(6,"label"),r.Xc(7,"Title (*)"),r.hc(),r.ic(8,"input",8),r.tc("ngModelChange",(function(t){return r.Oc(c),r.vc().mall.title=t})),r.hc(),r.hc(),r.hc(),r.ic(9,"div",6),r.ic(10,"div",7),r.ic(11,"label"),r.Xc(12,"Description"),r.hc(),r.ic(13,"textarea",9),r.tc("ngModelChange",(function(t){return r.Oc(c),r.vc().mall.description=t})),r.hc(),r.hc(),r.hc(),r.ic(14,"div",6),r.ic(15,"div",7),r.ic(16,"label"),r.Xc(17,"Image (*) "),r.ic(18,"media-select",10),r.tc("onSelect",(function(t){return r.Oc(c),r.vc().selectMedia(t)})),r.hc(),r.hc(),r.Vc(19,f,2,1,"div",11),r.hc(),r.hc(),r.ic(20,"div",6),r.ic(21,"div",7),r.ic(22,"label"),r.Xc(23,"Address"),r.hc(),r.ic(24,"textarea",12),r.tc("ngModelChange",(function(t){return r.Oc(c),r.vc().mall.address=t})),r.hc(),r.hc(),r.hc(),r.ic(25,"div",13),r.ic(26,"div",7),r.ic(27,"button",14),r.Xc(28,"Submit"),r.hc(),r.hc(),r.hc(),r.hc(),r.hc(),r.hc()}if(2&t){var i=r.vc();r.Pb(8),r.Cc("ngModel",i.mall.title),r.Pb(5),r.Cc("ngModel",i.mall.description),r.Pb(6),r.Cc("ngIf",i.media),r.Pb(5),r.Cc("ngModel",i.mall.address)}}var v=function(){function t(t,e,c,i){this.router=t,this.route=e,this.mallService=c,this.toasty=i}return t.prototype.ngOnInit=function(){var t=this,e=this.route.snapshot.paramMap.get("id");this.mallService.findOne(e).then((function(e){t.mall=e.data,e.data.media&&(t.media=e.data.media,t.mall.mediaId=e.data.media._id)}))},t.prototype.selectMedia=function(t){this.media=t},t.prototype.submit=function(t){var e=this;return this.mall.title?this.media?(this.mall.mediaId=this.media._id,void this.mallService.update(this.mall._id,this.mall).then((function(){e.toasty.success("mall has been updated"),e.router.navigate(["/malls"])}),(function(t){return e.toasty.error(t.data.message||"Something went wrong!")}))):this.toasty.error("Please browse mall image"):this.toasty.error("Please enter mall name")},t.\u0275fac=function(e){return new(e||t)(r.cc(n.f),r.cc(n.a),r.cc(o),r.cc(s.c))},t.\u0275cmp=r.Wb({type:t,selectors:[["app-mall-update"]],decls:2,vars:1,consts:[[1,"card"],["class","card-body",4,"ngIf"],[1,"card-body"],[3,"submit"],["frm",""],[1,"row"],[1,"col","col-md-6"],[1,"form-group"],["type","text","name","mallTitle","placeholder","Enter Title","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","malldesc","placeholder","Enter some text",1,"form-control",3,"ngModel","ngModelChange"],[3,"onSelect"],[4,"ngIf"],["name","address","placeholder","Enter some text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","col-md-12"],["type","submit",1,"btn","btn-primary"],[1,"img-thumbnail",3,"src"]],template:function(t,e){1&t&&(r.ic(0,"div",0),r.Vc(1,g,29,4,"div",1),r.hc()),2&t&&(r.Pb(1),r.Cc("ngIf",e.mall))},directives:[i.n,d.s,d.i,d.j,d.b,d.p,d.h,d.k,h.a],styles:[""]}),t}(),b=c("1kSV"),y=function(t){return["/malls/update",t]};function M(t,e){if(1&t){var c=r.jc();r.ic(0,"tr"),r.ic(1,"td"),r.dc(2,"img",11),r.hc(),r.ic(3,"td"),r.Xc(4),r.hc(),r.ic(5,"td"),r.Xc(6),r.hc(),r.ic(7,"td"),r.ic(8,"span"),r.Xc(9),r.wc(10,"date"),r.hc(),r.hc(),r.ic(11,"td"),r.ic(12,"a",12),r.dc(13,"i",13),r.hc(),r.Xc(14,"\xa0 "),r.ic(15,"a",14),r.tc("click",(function(){r.Oc(c);var t=e.$implicit,i=e.index;return r.vc().remove(t,i)})),r.dc(16,"i",15),r.hc(),r.hc(),r.hc()}if(2&t){var i=e.$implicit;r.Pb(2),r.Cc("src",null==i.media?null:i.media.thumbUrl,r.Qc),r.Pb(2),r.Yc(null==i?null:i.title),r.Pb(2),r.Yc(null==i?null:i.address),r.Pb(3),r.Yc(r.xc(10,5,i.createdAt)),r.Pb(3),r.Cc("routerLink",r.Gc(7,y,i._id))}}var C=[{path:"",component:function(){function t(t,e,c){this.router=t,this.mallService=e,this.toasty=c,this.items=[],this.page=1,this.total=0,this.title="",this.address=""}return t.prototype.ngOnInit=function(){this.query()},t.prototype.query=function(){var t=this;this.mallService.search({page:this.page,title:this.title,address:this.address}).then((function(e){t.items=e.data.items,t.total=e.data.count})).catch((function(){return alert("Something went wrong, please try again!")}))},t.prototype.keyPress=function(t){13===t.charCode&&this.query()},t.prototype.remove=function(t,e){var c=this;window.confirm("Are you sure want to delete this mall?")&&this.mallService.remove(t._id).then((function(){c.toasty.success("Item has been deleted!"),c.items.splice(e,1)})).catch((function(t){return c.toasty.error(t.data.message||"Something went wrong, please try again!")}))},t.\u0275fac=function(e){return new(e||t)(r.cc(n.f),r.cc(o),r.cc(s.c))},t.\u0275cmp=r.Wb({type:t,selectors:[["app-malls"]],decls:36,vars:6,consts:[[1,"card"],[1,"card-block","table-responsive"],[1,"table"],[1,"input-group"],["placeholder","search...",1,"form-control",3,"ngModel","ngModelChange","keypress"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","fa","fa-search",3,"click"],["colspan","2"],[4,"ngFor","ngForOf"],["colspan","4"],[3,"collectionSize","page","maxSize","pageChange"],["width","45px",3,"src"],[3,"routerLink"],[1,"fa","fa-pencil"],[3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(r.ic(0,"div",0),r.ic(1,"div",1),r.ic(2,"table",2),r.ic(3,"thead"),r.ic(4,"tr"),r.dc(5,"th"),r.ic(6,"th"),r.ic(7,"a"),r.Xc(8,"Title"),r.hc(),r.hc(),r.ic(9,"th"),r.ic(10,"a"),r.Xc(11,"Address"),r.hc(),r.hc(),r.ic(12,"th"),r.ic(13,"a"),r.Xc(14,"Created at"),r.hc(),r.hc(),r.ic(15,"th"),r.Xc(16," Actions "),r.hc(),r.hc(),r.ic(17,"tr"),r.dc(18,"th"),r.ic(19,"th"),r.ic(20,"div",3),r.ic(21,"input",4),r.tc("ngModelChange",(function(t){return e.title=t}))("keypress",(function(t){return e.keyPress(t)})),r.hc(),r.ic(22,"div",5),r.ic(23,"button",6),r.tc("click",(function(){return e.query()})),r.hc(),r.hc(),r.hc(),r.hc(),r.ic(24,"th"),r.ic(25,"div",3),r.ic(26,"input",4),r.tc("ngModelChange",(function(t){return e.address=t}))("keypress",(function(t){return e.keyPress(t)})),r.hc(),r.ic(27,"div",5),r.ic(28,"button",6),r.tc("click",(function(){return e.query()})),r.hc(),r.hc(),r.hc(),r.hc(),r.dc(29,"th",7),r.hc(),r.hc(),r.ic(30,"tbody"),r.Vc(31,M,17,9,"tr",8),r.hc(),r.ic(32,"tfoot"),r.ic(33,"tr"),r.ic(34,"td",9),r.ic(35,"ngb-pagination",10),r.tc("pageChange",(function(t){return e.page=t}))("pageChange",(function(){return e.query()})),r.hc(),r.hc(),r.hc(),r.hc(),r.hc(),r.hc(),r.hc()),2&t&&(r.Pb(21),r.Cc("ngModel",e.title),r.Pb(5),r.Cc("ngModel",e.address),r.Pb(5),r.Cc("ngForOf",e.items),r.Pb(4),r.Cc("collectionSize",e.total)("page",e.page)("maxSize",5))},directives:[d.b,d.h,d.k,i.m,b.g,n.i],pipes:[i.e],styles:[""]}),t}(),data:{title:"Manage malls",urls:[{title:"Malls",url:"/malls"},{title:"Listing"}]}},{path:"create",component:p,data:{title:"Manage malls",urls:[{title:"Banners",url:"/malls"},{title:"Create new mall"}]}},{path:"update/:id",component:v,data:{title:"Manage malls",urls:[{title:"malls",url:"/malls"},{title:"Update mall"}]}}],P=function(){function t(){}return t.\u0275mod=r.ac({type:t}),t.\u0275inj=r.Zb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(C)],n.j]}),t}(),w=c("vbE1"),k=function(){function t(){}return t.\u0275mod=r.ac({type:t}),t.\u0275inj=r.Zb({factory:function(e){return new(e||t)},providers:[o],imports:[[i.b,P,w.a,d.c,b.f]]}),t}()}}]);