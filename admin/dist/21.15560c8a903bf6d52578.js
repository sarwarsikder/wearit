(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{McEk:function(t,e,c){"use strict";c.r(e),c.d(e,"PostModule",(function(){return b}));var i=c("tyNb"),n=c("ofXK"),o=c("3Pt+"),r=c("1kSV"),a=c("Yn6Y"),s=(c("EUDy"),c("fXoL")),u=c("sXYb"),h=function(){function t(t){this.restangular=t}return t.prototype.create=function(t){return this.restangular.all("posts").post(t).toPromise()},t.prototype.update=function(t,e){return this.restangular.one("posts",t).customPUT(e).toPromise()},t.prototype.search=function(t){return this.restangular.one("posts").get(t).toPromise()},t.prototype.findOne=function(t){return this.restangular.one("posts",t).get().toPromise()},t.prototype.remove=function(t){return this.restangular.one("posts",t).customDELETE().toPromise()},t.\u0275fac=function(e){return new(e||t)(s.qc(u.a))},t.\u0275prov=s.Yb({token:t,factory:t.\u0275fac}),t}(),l=c("0OCT"),p=function(t){return["/posts/update",t]};function d(t,e){if(1&t){var c=s.jc();s.ic(0,"tr"),s.ic(1,"td"),s.Xc(2),s.hc(),s.ic(3,"td"),s.Xc(4),s.hc(),s.ic(5,"td"),s.ic(6,"div"),s.ic(7,"span",6),s.Xc(8,"Click edit to view content."),s.hc(),s.hc(),s.hc(),s.ic(9,"td"),s.ic(10,"span"),s.Xc(11),s.wc(12,"date"),s.hc(),s.hc(),s.ic(13,"td"),s.ic(14,"a",7),s.dc(15,"i",8),s.hc(),s.Xc(16,"\xa0 "),s.ic(17,"a",9),s.tc("click",(function(){s.Oc(c);var t=e.$implicit,i=e.index;return s.vc().remove(t,i)})),s.dc(18,"i",10),s.hc(),s.hc(),s.hc()}if(2&t){var i=e.$implicit;s.Pb(2),s.Yc(null==i?null:i.title),s.Pb(2),s.Yc(null==i?null:i.alias),s.Pb(7),s.Yc(s.xc(12,4,i.createdAt)),s.Pb(3),s.Cc("routerLink",s.Gc(6,p,i._id))}}var g=function(){function t(t,e,c){this.router=t,this.postService=e,this.toasty=c,this.items=[],this.page=1,this.total=0}return t.prototype.ngOnInit=function(){this.query()},t.prototype.query=function(){var t=this;this.postService.search({page:this.page}).then((function(e){t.items=e.data.items,t.total=e.data.count})).catch((function(){return alert("Something went wrong, please try again!")}))},t.prototype.remove=function(t,e){var c=this;window.confirm("Are you sure want to delete this page?")&&this.postService.remove(t._id).then((function(){c.toasty.success("Item has been deleted!"),c.items.splice(e,1)})).catch((function(t){return c.toasty.error(t.data.message||"Something went wrong, please try again!")}))},t.\u0275fac=function(e){return new(e||t)(s.cc(i.f),s.cc(h),s.cc(l.c))},t.\u0275cmp=s.Wb({type:t,selectors:[["ng-component"]],decls:25,vars:4,consts:[[1,"card"],[1,"card-block","table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["colspan","4"],[3,"collectionSize","maxSize","page","pageChange"],[1,"label","label-info"],[3,"routerLink"],[1,"fa","fa-pencil"],[3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(s.ic(0,"div",0),s.ic(1,"div",1),s.ic(2,"table",2),s.ic(3,"thead"),s.ic(4,"tr"),s.ic(5,"th"),s.ic(6,"a"),s.Xc(7,"Title"),s.hc(),s.hc(),s.ic(8,"th"),s.ic(9,"a"),s.Xc(10,"Alias"),s.hc(),s.hc(),s.ic(11,"th"),s.ic(12,"a"),s.Xc(13,"Content"),s.hc(),s.hc(),s.ic(14,"th"),s.ic(15,"a"),s.Xc(16,"Created at"),s.hc(),s.hc(),s.ic(17,"th"),s.Xc(18," Actions "),s.hc(),s.hc(),s.hc(),s.ic(19,"tbody"),s.Vc(20,d,19,8,"tr",3),s.hc(),s.ic(21,"tfoot"),s.ic(22,"tr"),s.ic(23,"td",4),s.ic(24,"ngb-pagination",5),s.tc("pageChange",(function(t){return e.page=t}))("pageChange",(function(){return e.query()})),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.hc()),2&t&&(s.Pb(20),s.Cc("ngForOf",e.items),s.Pb(4),s.Cc("collectionSize",e.total)("maxSize",5)("page",e.page))},directives:[n.m,r.g,i.i],pipes:[n.e],encapsulation:2}),t}(),f=c("LvDl"),m=function(){return["/posts"]},v=[{path:"",component:g,data:{title:"Manage pages",urls:[{title:"Pages",url:"/posts"},{title:"Listing"}]}},{path:"update/:id",component:function(){function t(t,e,c,i){var n=this;this.router=t,this.route=e,this.postService=c,this.toasty=i,this.item={};var o=this.route.snapshot.params.id;this.postService.findOne(o).then((function(t){return n.item=t.data})).catch((function(){return n.toasty.error("Something went wrong, please try again.")}))}return t.prototype.ngOnInit=function(){},t.prototype.submit=function(t){var e=this;if(!t.valid)return this.toasty.error("Something went wrong, please try again");var c=f.pick(this.item,["title","alias","content"]);this.postService.update(this.item._id,c).then((function(t){e.toasty.success("Updated successfully!"),e.router.navigate(["/posts"])})).catch((function(){return e.toasty.error("Something went wrong, please try again.")}))},t.\u0275fac=function(e){return new(e||t)(s.cc(i.f),s.cc(i.a),s.cc(h),s.cc(l.c))},t.\u0275cmp=s.Wb({type:t,selectors:[["ng-component"]],decls:28,vars:5,consts:[[1,"card"],[1,"card-body"],["ngNativeValidate","",3,"submit"],["frm","ngForm"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","text","name","title","placeholder","Enter title","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","alias","placeholder","Enter alias",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12"],["name","content",3,"froalaEditor","ngModel","ngModelChange"],[1,"col","col-md-12"],["type","submit",1,"btn","btn-primary"],[1,"btn","btn-warning",3,"routerLink"]],template:function(t,e){if(1&t){var c=s.jc();s.ic(0,"div",0),s.ic(1,"div",1),s.ic(2,"form",2,3),s.tc("submit",(function(){s.Oc(c);var t=s.Lc(3);return e.submit(t)})),s.ic(4,"div",4),s.ic(5,"div",5),s.ic(6,"div",6),s.ic(7,"label"),s.Xc(8,"Title (*)"),s.hc(),s.ic(9,"input",7),s.tc("ngModelChange",(function(t){return e.item.title=t})),s.hc(),s.hc(),s.hc(),s.ic(10,"div",5),s.ic(11,"div",6),s.ic(12,"label"),s.Xc(13,"Alias"),s.hc(),s.ic(14,"input",8),s.tc("ngModelChange",(function(t){return e.item.alias=t})),s.hc(),s.hc(),s.hc(),s.ic(15,"div",9),s.ic(16,"div",6),s.ic(17,"label"),s.Xc(18,"Content"),s.hc(),s.ic(19,"div",10),s.tc("ngModelChange",(function(t){return e.item.content=t})),s.Xc(20,"Hello!"),s.hc(),s.hc(),s.hc(),s.ic(21,"div",11),s.ic(22,"div",6),s.ic(23,"button",12),s.Xc(24,"Submit"),s.hc(),s.Xc(25,"\xa0 "),s.ic(26,"button",13),s.Xc(27,"Cancel"),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.hc()}2&t&&(s.Pb(9),s.Cc("ngModel",e.item.title),s.Pb(5),s.Cc("ngModel",e.item.alias),s.Pb(5),s.Cc("ngModel",e.item.content),s.Pb(7),s.Cc("routerLink",s.Fc(4,m)))},directives:[o.i,o.j,o.b,o.p,o.h,o.k,a.a,i.g],encapsulation:2}),t}(),data:{title:"Manage pages",urls:[{title:"Pages",url:"/posts"},{title:"Update page"}]}}],b=function(){function t(){}return t.\u0275mod=s.ac({type:t}),t.\u0275inj=s.Zb({factory:function(e){return new(e||t)},providers:[h],imports:[[n.b,o.c,r.f,i.j.forChild(v),a.b,a.c]]}),t}()}}]);